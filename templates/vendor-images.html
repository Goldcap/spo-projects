{% extends "base.html" %}
{% block content %}

  {% block nav %}
  <!-- Main Page Content and Sidebar -->
  <div class="row">
  	<div class="twelve column">
    	 <ul class="sub-nav">
            <li><a href="/gallery">The Gallery</a></li> 
            <li><a href="/vendor_home/">My Profile</a></li> 
            <!--<li><a href="/market_select/">Make a Payment</a></li>-->
            <li><a class="active" href="#">My Photos</a></li>
         </ul>
		
    </div>
  </div>
  
  {% if user.is_staff or user.is_superadmin %}
  <div class="row">
  	<div class="eight column">
        &nbsp;
    </div>
    <div class="four column">
    	 <ul class="breadcrumbs">
            <li><a href="/vendor_profile_report/">User Admin</a></li>
            <li><a href="/admin/">Django Admin</a></li>
        </ul>
    </div>
  </div>
  {% endif %}
  {% endblock %}
  
  	<div class="row">
	
    <!-- Main Blog Content -->
    <div class="twelve columns settop" role="main">

    	<div class="row">
        	<div class="eight columns">
            	<h5><a href="">{{ vendor.Company }}</a></h5>
            </div>
            
            <aside class="four columns">
            	<div class="row">
                	<div class="twelve columns">
                    	<h5><a href=""> {{ user.email }} </a></h5>
                    </div>
                </div>
            </aside>
        </div>
        
        <div class="row">
        	<div class="twelve columns">
            	<p>&nbsp;</p>
            </div>
        </div>
        
        
        <div class="row">
        	<div class="twelve columns">
            	<h6>Images</h6>
        		<p>Upload as many images as you'd like. We might use these images in printed materials, so please use high resolution images.</p>
               		<div class="row">
                        <!--<div class="six columns">
                        <span id="validation_msg_fea_mer_title" style="color:Red;display:none;">Caption is required</span>
                        <input type="text" name="Caption" id="id_Caption" placeholder="Title" >
                        </div>-->
                        
                        <div class="six columns">
                        	<ul class="button-group group-newmargin">
                                <li><a href="#" class="button radius">Upload Image(s)</a></li>
                            </ul>
                            
                            <!-- The fileinput-button span is used to style the file input field as button -->
                            <span class="btn btn-success fileinput-button">
                                <!-- The file input field used as target for the file upload widget -->
                                <input id="merchfileupload" type="file" name="files[]" multiple>
                            </span>
                            
                            <br />
                        </div>
                    </div>
                 
            </div>
        </div>
        
        <div class="row">
        	<div class="six columns">
            	<h6>Uploaded Images:</h6>
             	
                <div class="row">
                    <div class="six columns">
                            
                        <table id="filetable" style="width:100%">
                            {% if images %}
                            {% for animage in images %}
                        	<tr id="tr_vendor_{{animage.id}}" class="vendor">
                            	<td style="width:80px">
                                    <div class="overlay"></div>                            
                                    <img id="{{animage.id}}" type="vendor" class="image" src="{{animage.thumbnail}}" alt="" />
                                </td>
                                <td>
                                   {{ animage.caption }}
                                </td>
                            </tr>
                            {% endfor %}
                            {% endif %}
                            <tr id="tr_vendor_0" class="vendor" {% if images %}style="display:none"{% endif %}>
                            	<td colspan="2">
                                   No uploaded images.
                                </td>
                            </tr>
                        </table>
                        
                    </div>
                </div>
                
            </div>
            <div class="six columns"></div>
        </div>
        
        <!-- End Main Content and Sidebar -->
        <script type="text/javascript">
        $(function () {
            'use strict';
            // Change this to the location of your server-side upload handler:
            var url = '/image_manager/{{ vendor.id }}/';
            $('#merchfileupload').fileupload({
                url: url,
                dataType: 'json',
                formData: {atype: 'vendor'
                           //title: $("#id_Caption").val(),
                           },
                done: function (e, data) {
                    $.each(data.result.files, function (index, file) {
                        $("#tr_vendor_0.vendor").hide();
                        var text = '<tr id="tr_vendor_'+file.id+'" class="vendor"><td style="width:80px"><div class="overlay"></div><img id="vendor_'+file.id+'" class="image" type="vendor" src="'+file.thumbnail_url+'" alt="" /></td><td>'+file.name+'</td></tr>';
                        $(text).appendTo('#filetable');
                        linkImages();
                    });
                }
            });
        });
        </script>

        
      		<div class="row">
                <div class="twelve columns">
                    <p>&nbsp;</p>
                </div>	
            </div>
        
     
 		
    </div>

    <!-- End Main Content -->


    <div class="row">
         <div class="twelve columns">
         	<p>&nbsp;</p>
         </div>
    </div>
    
     </form>
  </div>

{% endblock %}